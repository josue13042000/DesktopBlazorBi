@inject NavigationManager navigationManager

@page "/fetchdata/{IdUsuario}"

<div class="ui equal width center aligned padded grid">
    <iframe width="100%"
            height="100%"
            frameborder="0" 
            style="border:0; height: 100vh;"
            src=@liga
            allowfullscreen>
    </iframe>



</div>

@code {
    [Inject]
    private NavigationManager NavigationManager { get; set; }

    private bool paginaRecargada = false;


    [Parameter]
    public string IdUsuario { get; set; }
    public string liga ;
    protected override async Task OnInitializedAsync()
    {
        liga = "https://www.innovasegmx.com/atm/MapaAdministrador.html?id=" + IdUsuario;
        Console.WriteLine("hola");

        if (!paginaRecargada)
        {
          //  NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
            paginaRecargada = true;
        }

    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            navigationManager.NavigateTo($"/fetchdata/{IdUsuario}");
           // navigationManager.NavigateTo("/", true);
        }
        else
        {
            // Se ejecuta después de renderizaciones 
            // eriores
        }
    }




}